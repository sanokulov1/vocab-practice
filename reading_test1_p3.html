<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Reading Practice - Animals predicting earthquakes?</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #333333;
            --passage-bg: #f8f9fa;
            --questions-bg: #ffffff;
            --border-color: #e0e0e0;
            --highlight-color: #87CEEB; /* Azure Blue for highlight */
            
            /* Header & Controls Colors (Azure themed) */
            --header-bg: #F0F8FF; /* Very light azure for header background */
            --header-text: #333333; /* Dark text for light header */

            /* Button Colors (Azure themed) */
            --button-bg: #007FFF; /* Primary button azure */
            --button-hover: #005fbe; /* Darker azure on hover */
            
            --correct-color: #28a745; /* Standard green */
            --incorrect-color: #dc3545; /* Standard red */
            --progress-complete: #007FFF; /* Azure for completed progress */
            --progress-incomplete: #bdbdbd;

            /* Timer Colors (Azure themed) */
            --timer-bg: #e0f2f7; /* Very light azure/cyan */
            --timer-text: #0288d1; /* Darker azure/cyan */

            --footer-bg: #f5f5f5;
        }

        .night-mode {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --passage-bg: #1e1e1e;
            --questions-bg: #1e1e1e;
            --border-color: #424242;
            --highlight-color: #0047AB; /* Darker Azure for night mode */
            
            /* Night Mode Header & Controls Colors */
            --header-bg: #1a1a1a; /* Dark gray for header background */
            --header-text: #ffffff; /* White text for dark header */

            /* Night Mode Button Colors */
            --button-bg: #0047AB; /* Darker primary button azure */
            --button-hover: #002e70; /* Even darker azure on hover */
            
            --correct-color: #218838; /* Darker green */
            --incorrect-color: #c82333; /* Darker red */
            --progress-complete: #0047AB; /* Darker azure for completed progress */
            --progress-incomplete: #616161;

            /* Night Mode Timer Colors */
            --timer-bg: #002b4d; /* Dark azure */
            --timer-text: #81d4fa; /* Lighter azure */

            --footer-bg: #121212;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        header {
            background-color: var(--header-bg);
            color: var(--header-text);
            padding: 12px 20px;
            display: flex;
            justify-content: flex-end; /* Align to the right since logo area is gone */
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 100;
        }
        
        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .timer-container {
            background-color: var(--timer-bg);
            color: var(--timer-text);
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timer-controls {
            display: flex;
            gap: 8px;
        }

        .timer-controls button {
            background: none;
            border: none;
            color: var(--timer-text);
            cursor: pointer;
            font-size: 16px;
            padding: 4px;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .timer-controls button:hover {
            background-color: rgba(0,0,0,0.1); /* Darker hover for light timer */
        }
        .night-mode .timer-controls button:hover {
            background-color: rgba(255,255,255,0.2); /* Lighter hover for dark timer */
        }

        .mode-toggle {
            background: none;
            border: none;
            color: var(--header-text);
            cursor: pointer;
            font-size: 20px;
            padding: 6px;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mode-toggle:hover {
            background-color: rgba(0,0,0,0.1); /* Darker hover for light header */
        }
        .night-mode .mode-toggle:hover {
            background-color: rgba(255,255,255,0.2); /* Lighter hover for dark header */
        }

        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .passage-container, .questions-container {
            height: 100%;
            overflow-y: auto;
            padding: 20px;
        }

        .passage-container {
            width: 50%;
            background-color: var(--passage-bg);
            border-right: 1px solid var(--border-color);
            position: relative;
        }

        .questions-container {
            width: 50%;
            background-color: var(--questions-bg);
        }

        .passage-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .passage-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-color);
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }

        .passage-text {
            font-size: 17px;
        }
        
        .question-text {
             font-size: 17px;
             line-height: 1.8; /* Increased line-height for fill-in-the-blank */
        }

        .passage-text p {
            margin-bottom: 20px;
            text-align: justify;
        }

        .highlight {
            background-color: var(--highlight-color);
            cursor: pointer;
        }

        .highlight-tooltip {
            position: absolute;
            background-color: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
            z-index: 1000;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin: 25px 0 15px;
            color: var(--text-color);
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .question-group {
            margin-bottom: 30px;
        }

        .question {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 8px;
            background-color: var(--passage-bg);
            border-left: 4px solid var(--border-color);
        }

        .question-title {
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: baseline; /* Align baselines of number and text */
        }

        .question-number {
            display: inline-block;
            width: 28px;
            height: 28px;
            background-color: var(--progress-incomplete);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            margin-right: 10px;
            font-size: 14px;
            flex-shrink: 0;
        }

        .question.answered .question-number {
            background-color: var(--progress-complete);
        }

        /* Adjusted options for vertical display */
        .options {
            display: flex;
            flex-direction: column; /* Force vertical stacking */
            gap: 8px; /* Space between options */
            margin-top: 8px;
        }

        .option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .option input {
            margin-right: 8px;
        }

        /* Styling for the new inline input fields */
        .fill-in-the-blank {
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--text-color);
            width: 150px;
            font-family: inherit;
            font-size: 1em; /* Inherit font size from parent */
            color: inherit;
            padding: 0 4px 2px 4px; /* Add some padding */
            margin: 0 3px; /* Add some margin */
            vertical-align: baseline; /* Align with the text */
            text-align: center;
            outline: none;
            transition: border-color 0.3s;
        }

        .fill-in-the-blank:focus {
            border-bottom-color: var(--button-bg);
        }


        .instructions {
            font-size: 14px;
            color: #757575;
            margin-top: 5px;
            font-style: italic;
        }

        /* Table styles for new matching questions */
        .matching-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 16px;
        }

        .matching-table th, .matching-table td {
            border: 1px solid var(--border-color);
            padding: 10px 15px;
            text-align: center;
        }

        .matching-table th {
            background-color: var(--header-bg);
            color: var(--header-text);
            font-weight: 600;
        }

        .matching-table td {
            background-color: var(--passage-bg);
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .matching-table td:hover:not(.question-cell):not(.header-cell) {
            background-color: rgba(0, 127, 255, 0.1); /* Light azure tint on hover */
        }
        .night-mode .matching-table td:hover:not(.question-cell):not(.header-cell) {
            background-color: rgba(0, 71, 171, 0.2); /* Darker azure tint on hover for night mode */
        }

        .matching-table .question-cell {
            text-align: left;
            font-weight: 500;
            background-color: var(--questions-bg); /* Keep question cells distinct */
        }
        .matching-table .header-cell {
            background-color: var(--header-bg);
            color: var(--header-text);
            font-weight: 600;
        }

        .matching-table .selected {
            background-color: var(--highlight-color);
        }

        footer {
            background-color: var(--footer-bg);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid var(--border-color);
            box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
        }

        .progress-container {
            display: flex;
            gap: 8px;
        }

        .progress-item {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--progress-incomplete);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .progress-item:hover {
            transform: scale(1.1);
        }

        .progress-item.completed {
            background-color: var(--progress-complete);
        }

        .action-buttons {
            display: flex;
            gap: 12px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s, border-color 0.3s, color 0.3s;
        }

        .btn-primary {
            background-color: var(--button-bg);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--button-hover);
        }

        .btn-secondary {
            background-color: transparent;
            border: 1px solid var(--button-bg); /* Use primary button color for border */
            color: var(--button-bg); /* Use primary button color for text */
        }

        .btn-secondary:hover {
            background-color: rgba(0, 127, 255, 0.1); /* Light azure tint on hover */
        }
        .night-mode .btn-secondary:hover {
            background-color: rgba(0, 71, 171, 0.2); /* Darker azure tint on hover for night mode */
        }


        .feedback-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
        }

        .feedback-container {
            background-color: var(--passage-bg);
            width: 90%;
            max-width: 900px;
            height: 90%;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
        }

        .feedback-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .feedback-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        #close-feedback {
            font-size: 24px;
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
        }

        .score-display {
            font-size: 24px;
            font-weight: 700;
            margin-left: 10px;
        }
        
        .feedback-body {
            padding: 20px;
            overflow-y: auto;
        }

        .feedback-item {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 8px;
            background-color: var(--questions-bg);
        }

        .feedback-question {
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .feedback-answer {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 4px;
            background-color: rgba(0,0,0,0.05);
        }

        .correct {
            color: var(--correct-color);
        }

        .incorrect {
            color: var(--incorrect-color);
        }

        .feedback-explanation {
            margin-top: 10px;
            padding: 10px;
            border-left: 3px solid var(--button-bg); /* Use primary button color for explanation border */
            background-color: rgba(0,0,0,0.03);
        }

        .feedback-passage {
            margin-top: 8px;
            font-style: italic;
            color: #757575;
        }

        /* Responsive Design */
        @media (max-width: 900px) {
            main {
                flex-direction: column;
            }
            
            .passage-container, .questions-container {
                width: 100%;
                height: 50%;
            }
            
            .passage-container {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }
            
            .progress-container {
                flex-wrap: wrap;
                max-width: 60%;
            }
        }

        @media (max-width: 600px) {
            header {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }
            .header-controls {
                width: 100%;
                justify-content: space-around;
            }
            .progress-container {
                max-width: 50%;
            }
            .progress-item {
                width: 26px;
                height: 26px;
                font-size: 12px;
            }
            footer {
                flex-direction: column;
                gap: 15px;
            }
            .action-buttons {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-controls">
            <div class="timer-container">
                <i class="fas fa-clock"></i>
                <span id="timer">20:00</span>
                <div class="timer-controls">
                    <button id="start-timer" title="Start"><i class="fas fa-play"></i></button>
                    <button id="pause-timer" title="Pause"><i class="fas fa-pause"></i></button>
                    <button id="reset-timer" title="Reset"><i class="fas fa-redo"></i></button>
                </div>
            </div>
            <button class="mode-toggle" id="night-mode-toggle" title="Toggle Night Mode">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </header>

    <main>
        <div class="passage-container" id="passage-container">
            <div class="passage-content">
                <div class="passage-title">Animals predicting earthquakes?</div>
                <div class="passage-text" id="passage-text">
                    <p>Surely it is too much to believe that animals can predict earthquakes when we haven't worked out how to do it ourselves?</p>
                    <p>On 26 December 2004, villagers from Bang Koey in Thailand noticed buffalo on the beach lift their heads, look out to sea, then stampede to the top of a nearby hill. Minutes later, the tsunami* struck. Could these creatures have been sensing early warning signs of the earthquake that triggered the Asian tsunami? It is a strange assertion but the possibility that animals might hold the answer cannot be ignored, as a warning system could save many lives.</p>
                    <p>The idea that animals can predict earthquakes has ancient origins. From 373 BC there are stories of rats, dogs and snakes deserting the Greek city of Helice before an earthquake hit. It was the first in a long line of such anecdotes. What has been lacking is any real scientific data linking animal behaviour with earthquakes.</p>
                    <p>In late 2000, however, Stanley Coren from the University of British Columbia started a study to discover whether dogs suffer from ‘seasonal affective disorder.’** Twice weekly, he emailed 200 dog owners in Vancouver, asking them to rate their pets' activity and anxiety levels using a nine-point scale. In general there was little daily variability; Coren's initial analysis of many months' worth of information strongly refuted his suspicion that dogs become depressed during winter, and he abandoned the project. When he finally went through the figures in detail several years later however, he noticed that on 27 February 2001, nearly 50 per cent were well above their usual baseline for activity and anxiety. The likelihood of such a difference was remote and Coren searched through the newspaper archives for a cause. He found that on 28 February a quake of magnitude 6.8 shook the Pacific north- west, with an epicentre at Nisqually about 240 kilometres south of Vancouver. Coren wondered what the dogs could have sensed. There was little to guide him.</p>
                    <p>Even the most comprehensive earthquake research project in the world, the Parkfield experiment in California, couldn't help. Since 1985, researchers from the US Geological Survey (USGS) have monitored a section of the San Andreas fault near the town of Parkfield. They have analysed every tremor, and measured tiny movements of the fault at 10- minute intervals, but to date the project has revealed nothing that would reliably indicate that an earthquake is imminent.</p>
                    <p>There is still much speculation about animals predicting earthquakes. For example, one idea is that some animals detect changes in the Earth's electrical field. Another theory is that animals are responding to gas such as radon released from rocks before a quake, despite the fact that few experts accept such gas is produced. Rupert Sheldrake, a British researcher, suggests that ‘people notice unusual animal behaviour before disasters. I think animals are picking up on something that we can't, perhaps by using a sixth sense.’</p>
                    <p>Coren, however, had read about rescue dogs hearing avalanche victims under the snow, and suspected the dogs in his study might also be hearing vibrations. So he returned to his data to search for supporting evidence. He discovered that only one of the 14 hearing- impaired dogs in his study had shown any significant increase in anxiety on 27 February, and it was living with a hearing dog that had become anxious. Dogs with floppy ears showed only half the change in activity and one-third the change in anxiety level of dogs with pricked ears. Not only would an ear flap reduce the amount of sound reaching the inner ear; Coren also realised that it would weaken high frequency sounds more than low frequency ones. Further, dogs with smaller heads were significantly more likely to behave strangely than those with larger heads, which was interesting, given that smaller-headed dogs are more sensitive to higher frequencies.</p>
                    <p>Taken together, Coren's results present an alluring hypothesis. He suggests that the kind of high frequency sounds that many dogs can hear are emitted before an earthquake, perhaps from rocks scraping underground. Admittedly this is only one study. Even if Coren is right, is it still possible that other animals could predict quakes in different ways? Eric Wikramanayake, a conservation scientist who used radio collars and happened to be studying elephants in Sri Lanka when the tsunami struck, is entirely sceptical. What he found was precisely nothing. One herd was only 100 metres away from the beach when the tsunami arrived and they just took cover behind a large sand dune when the wave came in sight. The other herd was safely located about 5 kilometres inland and did not show any unusual movements.</p>
                    <p>Even if some quakes are preceded by high- frequency vibrations, is it feasible that dogs in Vancouver could detect sounds emitted near Nisqually? USGS seismologist Andy Michael points out that the epicentre was over 240 kilometres south of Vancouver. 'It is physically implausible for seismic waves in the kilohertz range to travel that far,' he says. Although unconvinced by Coren's ideas, Michael adds a cautionary tale. 'When Alfred Wegener presented his theory of continental drift, his core ideas about tectonics were right but nobody listened because the mechanisms were wrong.'</p>
                    <p>So if animals are able to foretell earthquakes, does it matter how? In fact, while western society has been reluctant to use animals as earthquake predictors, China has already embraced the idea. Experts there use a video link to keep a 24-hour watch on snakes in farms nationwide. If they try to escape from their enclosure, observers raise a warning.</p>
                    <p>Other governments may not be willing to go that far just yet, but Coren believes that a centre that people could call when they see unusual things would be useful. 'We would be able to collect much more data and give warnings when we get hundreds of calls from a single area,' he says. It could cost little more than the price of setting up a phone line. Put that way, what have we got to lose?</p>
                    <p>* tsunami: large, destructive wave caused by earthquakes</p>
                    <p>** seasonal affective disorder, emotional and psychological changes created by changes in the amount of daylight in winter</p>
                </div>
            </div>
        </div>
        
        <div class="questions-container" id="questions-container">
            <div class="section-title">Questions 27–30</div>
            <div class="instructions">Do the following statements agree with the views of the writer in Reading Passage 3?<br>In boxes 27-30 on your answer sheet, write<br>YES &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if the statement agrees with the views of the writer<br>NO &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if the statement contradicts the views of the writer<br>NOT GIVEN &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if it is impossible to say what the writer thinks about this</div>
            
            <div class="question-group">
                <div class="question" id="q27">
                    <div class="question-title">
                        <div class="question-number">27</div>
                        <div class="question-text">There is historical scientific evidence to support stories of animals predicting earthquakes.</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q27" value="YES"> YES</label>
                        <label class="option"><input type="radio" name="q27" value="NO"> NO</label>
                        <label class="option"><input type="radio" name="q27" value="NOT GIVEN"> NOT GIVEN</label>
                    </div>
                </div>
                
                <div class="question" id="q28">
                    <div class="question-title">
                        <div class="question-number">28</div>
                        <div class="question-text">Coren's decision to investigate the possibility that dogs can anticipate an earthquake was based on some archive information.</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q28" value="YES"> YES</label>
                        <label class="option"><input type="radio" name="q28" value="NO"> NO</label>
                        <label class="option"><input type="radio" name="q28" value="NOT GIVEN"> NOT GIVEN</label>
                    </div>
                </div>

                <div class="question" id="q29">
                    <div class="question-title">
                        <div class="question-number">29</div>
                        <div class="question-text">Dogs may be more sensitive to changes in the Earth's electrical field than other animals.</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q29" value="YES"> YES</label>
                        <label class="option"><input type="radio" name="q29" value="NO"> NO</label>
                        <label class="option"><input type="radio" name="q29" value="NOT GIVEN"> NOT GIVEN</label>
                    </div>
                </div>

                <div class="question" id="q30">
                    <div class="question-title">
                        <div class="question-number">30</div>
                        <div class="question-text">Coren's findings from his original study of dogs clearly prove they can hear high frequencies which signal earthquakes.</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q30" value="YES"> YES</label>
                        <label class="option"><input type="radio" name="q30" value="NO"> NO</label>
                        <label class="option"><input type="radio" name="q30" value="NOT GIVEN"> NOT GIVEN</label>
                    </div>
                </div>
            </div>
            
            <div class="section-title">Questions 31–35</div>
            <div class="instructions">Choose the correct letter, A, B, C or D.<br>Write the correct letter in boxes 31-35 on your answer sheet.</div>
            
            <div class="question-group">
                <div class="question" id="q31">
                    <div class="question-title">
                        <div class="question-number">31</div>
                        <div class="question-text">What is the writer's main point in paragraph 4?</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q31" value="A"> A. The strength of the next earthquake along the San Andreas fault is unpredictable.</label>
                        <label class="option"><input type="radio" name="q31" value="B"> B. It is not the first time that the theory of animal prediction has been investigated.</label>
                        <label class="option"><input type="radio" name="q31" value="C"> C. Experts have never identified any reliable predictors for earthquakes.</label>
                        <label class="option"><input type="radio" name="q31" value="D"> D. The Parkfield project depended on unreliable methods for earthquake detection.</label>
                    </div>
                </div>
                
                <div class="question" id="q32">
                    <div class="question-title">
                        <div class="question-number">32</div>
                        <div class="question-text">When Coren re-analysed his data for 27 February he found that on that day</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q32" value="A"> A. dogs with either poor or good hearing were equally anxious.</label>
                        <label class="option"><input type="radio" name="q32" value="B"> B. the shape of a dog's ear seemed to correlate with its behaviour.</label>
                        <label class="option"><input type="radio" name="q32" value="C"> C. dogs with larger heads were the most sensitive to tremors.</label>
                        <label class="option"><input type="radio" name="q32" value="D"> D. the level of activity amongst dogs reduced as the earthquake occurred.</label>
                    </div>
                </div>

                <div class="question" id="q33">
                    <div class="question-title">
                        <div class="question-number">33</div>
                        <div class="question-text">Seismologist Andy Michael refers to Alfred Wegener in order to</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q33" value="A"> A. suggest there may be an aspect of Coren's theory which is correct.</label>
                        <label class="option"><input type="radio" name="q33" value="B"> B. dismiss the idea that dogs are capable of sensing earthquakes.</label>
                        <label class="option"><input type="radio" name="q33" value="C"> C. demonstrate how data can be falsified by subjective researchers.</label>
                        <label class="option"><input type="radio" name="q33" value="D"> D. criticise certain scientists for not being careful in their research.</label>
                    </div>
                </div>

                <div class="question" id="q34">
                    <div class="question-title">
                        <div class="question-number">34</div>
                        <div class="question-text">What is the writer doing in the penultimate paragraph?</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q34" value="A"> A. explaining why western researchers do not trust animal behaviour</label>
                        <label class="option"><input type="radio" name="q34" value="B"> B. arguing how animal prediction is superior to science-based prediction</label>
                        <label class="option"><input type="radio" name="q34" value="C"> C. suggesting a more reliable animal than the dog for predictive purposes</label>
                        <label class="option"><input type="radio" name="q34" value="D"> D. illustrating how animal behaviour is already exploited by some researchers</label>
                    </div>
                </div>

                <div class="question" id="q35">
                    <div class="question-title">
                        <div class="question-number">35</div>
                        <div class="question-text">What point is the writer making by using the phrase 'what have we got to lose' in the final paragraph?</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q35" value="A"> A. The cost of setting up a data collection centre needs to be considered.</label>
                        <label class="option"><input type="radio" name="q35" value="B"> B. It is worth setting up a call centre to record animal behaviour.</label>
                        <label class="option"><input type="radio" name="q35" value="C"> C. The pros and cons of different data collection methods must be weighed up.</label>
                        <label class="option"><input type="radio" name="q35" value="D"> D. There is a danger that existing data may be lost if not stored carefully.</label>
                    </div>
                </div>
            </div>

            <div class="section-title">Questions 36–40</div>
            <div class="instructions">Complete each sentence with the correct ending, A-H, below.<br>Write the correct letter, A-H, in boxes 36-40 on your answer sheet.</div>
            
            <div class="question-group" id="q-group-36-40">
                <table class="matching-table">
                    <thead>
                        <tr>
                            <th class="header-cell"></th> <th class="header-cell">A</th>
                            <th class="header-cell">B</th>
                            <th class="header-cell">C</th>
                            <th class="header-cell">D</th>
                            <th class="header-cell">E</th>
                            <th class="header-cell">F</th>
                            <th class="header-cell">G</th>
                            <th class="header-cell">H</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-question-id="36">
                            <td class="question-cell">36. The belief in the ability of animals to predict earthquakes</td>
                            <td data-answer="A"></td>
                            <td data-answer="B"></td>
                            <td data-answer="C"></td>
                            <td data-answer="D"></td>
                            <td data-answer="E"></td>
                            <td data-answer="F"></td>
                            <td data-answer="G"></td>
                            <td data-answer="H"></td>
                        </tr>
                        <tr data-question-id="37">
                            <td class="question-cell">37. Experts think it is unlikely that gas</td>
                            <td data-answer="A"></td>
                            <td data-answer="B"></td>
                            <td data-answer="C"></td>
                            <td data-answer="D"></td>
                            <td data-answer="E"></td>
                            <td data-answer="F"></td>
                            <td data-answer="G"></td>
                            <td data-answer="H"></td>
                        </tr>
                        <tr data-question-id="38">
                            <td class="question-cell">38. Sheldrake says that an animal's ability to predict disasters</td>
                            <td data-answer="A"></td>
                            <td data-answer="B"></td>
                            <td data-answer="C"></td>
                            <td data-answer="D"></td>
                            <td data-answer="E"></td>
                            <td data-answer="F"></td>
                            <td data-answer="G"></td>
                            <td data-answer="H"></td>
                        </tr>
                        <tr data-question-id="39">
                            <td class="question-cell">39. Coren speculated that a dog's ability to predict earthquakes</td>
                            <td data-answer="A"></td>
                            <td data-answer="B"></td>
                            <td data-answer="C"></td>
                            <td data-answer="D"></td>
                            <td data-answer="E"></td>
                            <td data-answer="F"></td>
                            <td data-answer="G"></td>
                            <td data-answer="H"></td>
                        </tr>
                        <tr data-question-id="40">
                            <td class="question-cell">40. The behaviour of the elephant herds in Wikramanayake's study</td>
                            <td data-answer="A"></td>
                            <td data-answer="B"></td>
                            <td data-answer="C"></td>
                            <td data-answer="D"></td>
                            <td data-answer="E"></td>
                            <td data-answer="F"></td>
                            <td data-answer="G"></td>
                            <td data-answer="H"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="matching-options-list">
                <strong>List of Endings</strong>
                <ul>
                    <li>A. is released during earthquakes.</li>
                    <li>B. showed little variation during the tsunami.</li>
                    <li>C. would have an effect on most dogs.</li>
                    <li>D. could be linked to their ability to detect movement in the ground.</li>
                    <li>E. was based on Chinese data-collection methods.</li>
                    <li>F. could be explained by extra-sensory perception.</li>
                    <li>G. dates back to before modern civilisation.</li>
                    <li>H. derived from poorly conducted research.</li>
                </ul>
            </div>
        </div>
    </main>

    <footer>
        <div class="progress-container" id="progress-container">
            </div>
        <div class="action-buttons">
            <button class="btn-secondary" id="reset-btn">Reset Answers</button>
            <button class="btn-primary" id="submit-btn">Submit Answers</button>
        </div>
    </footer>

    <div class="feedback-overlay" id="feedback-overlay">
        <div class="feedback-container" id="feedback-container">
            <div class="feedback-header">
                <div class="feedback-title">
                    <i class="fas fa-chart-bar"></i> Your Results
                    <span class="score-display" id="score-display">0/14</span>
                </div>
                <button id="close-feedback" title="Close"><i class="fas fa-times"></i></button>
            </div>
            <div class="feedback-body" id="feedback-body">
                </div>
        </div>
    </div>


    <script>
        // Timer functionality
        let timerInterval;
        let seconds = 1200; // 20 minutes
        let timerRunning = false;
        
        const timerDisplay = document.getElementById('timer');
        const startTimer = document.getElementById('start-timer');
        const pauseTimer = document.getElementById('pause-timer');
        const resetTimer = document.getElementById('reset-timer');
        
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
            const secs = (seconds % 60).toString().padStart(2, '0');
            return `${mins}:${secs}`;
        }
        
        function updateTimer() {
            timerDisplay.textContent = formatTime(seconds);
            if (seconds <= 0) {
                clearInterval(timerInterval);
                timerRunning = false;
                document.getElementById('submit-btn').click();
            }
        }
        
        startTimer.addEventListener('click', () => {
            if (!timerRunning) {
                timerRunning = true;
                timerInterval = setInterval(() => {
                    seconds--;
                    updateTimer();
                }, 1000);
            }
        });
        
        pauseTimer.addEventListener('click', () => {
            if (timerRunning) {
                clearInterval(timerInterval);
                timerRunning = false;
            }
        });
        
        resetTimer.addEventListener('click', () => {
            clearInterval(timerInterval);
            timerRunning = false;
            seconds = 1200;
            updateTimer();
        });
        
        // Night mode toggle
        const nightModeToggle = document.getElementById('night-mode-toggle');
        nightModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('night-mode');
            const icon = nightModeToggle.querySelector('i');
            if (document.body.classList.contains('night-mode')) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            }
        });
        
        // Create progress indicators for questions 27-40
        const progressContainer = document.getElementById('progress-container');
        for (let i = 27; i <= 40; i++) { 
            const progressItem = document.createElement('div');
            progressItem.className = 'progress-item';
            progressItem.textContent = i;
            progressItem.dataset.question = i;
            progressContainer.appendChild(progressItem);
            
            progressItem.addEventListener('click', () => {
                const questionElement = document.getElementById(`q${i}`);
                if (questionElement) {
                    questionElement.scrollIntoView({ behavior: 'smooth' });
                } else {
                    // For table-based questions, find the row and scroll to it
                    const tableRow = document.querySelector(`[data-question-id="${i}"]`);
                    if (tableRow) {
                        tableRow.scrollIntoView({ behavior: 'smooth' });
                    }
                }
            });
        }
        
        // Text highlighting functionality
        let highlightTooltip = null;

        function handleMouseUp(e) {
            const container = e.currentTarget;
            const selection = window.getSelection();
            if (selection.toString().trim() !== '' && container.contains(selection.anchorNode)) {
                const range = selection.getRangeAt(0);
                const rect = range.getBoundingClientRect();

                if (highlightTooltip) {
                    highlightTooltip.remove();
                    highlightTooltip = null;
                }

                highlightTooltip = document.createElement('div');
                highlightTooltip.className = 'highlight-tooltip';
                highlightTooltip.innerHTML = '<i class="fas fa-highlighter"></i> Highlight';
                highlightTooltip.style.position = 'fixed';
                highlightTooltip.style.top = `${rect.top - 40}px`;
                highlightTooltip.style.left = `${rect.left}px`;
                document.body.appendChild(highlightTooltip);

                highlightTooltip.addEventListener('click', () => {
                    const span = document.createElement('span');
                    span.className = 'highlight';
                    span.appendChild(range.extractContents());
                    range.insertNode(span);
                    selection.removeAllRanges();
                    highlightTooltip.remove();
                    highlightTooltip = null;
                });
            }
        }

        document.getElementById('passage-text').addEventListener('mouseup', handleMouseUp);
        document.getElementById('questions-container').addEventListener('mouseup', handleMouseUp);
        
        document.addEventListener('mousedown', (e) => {
            if (highlightTooltip && !highlightTooltip.contains(e.target)) {
                highlightTooltip.remove();
                highlightTooltip = null;
                window.getSelection().removeAllRanges();
            }
        });
        
        // Store user answers for all questions
        const userAnswers = {}; 

        // Handle table cell clicks for questions 36-40
        document.querySelectorAll('.matching-table td:not(.question-cell):not(.header-cell)').forEach(cell => {
            cell.addEventListener('click', function() {
                const row = this.closest('tr');
                const questionId = parseInt(row.dataset.questionId);
                const answer = this.dataset.answer;

                // Remove 'selected' class from all selectable cells in the same row
                row.querySelectorAll('td:not(.question-cell):not(.header-cell)').forEach(td => td.classList.remove('selected'));

                // Add 'selected' class to the clicked cell
                this.classList.add('selected');

                // Store the answer
                userAnswers[questionId] = answer;
                updateProgress();
            });
        });

        // Track answered questions and update progress bar
        const progressItems = document.querySelectorAll('.progress-item');
        
        function updateProgress() {
            let answeredCount = 0;
            
            for (let i = 27; i <= 40; i++) {
                const questionNumber = i;
                let answered = false;

                if (questionNumber >= 27 && questionNumber <= 35) { // Multiple Choice & True/False/Not Given
                    const selectedOption = document.querySelector(`input[name="q${questionNumber}"]:checked`);
                    answered = selectedOption !== null;
                    if (answered) {
                        userAnswers[questionNumber] = selectedOption.value; // Store radio button answer
                    } else {
                        delete userAnswers[questionNumber]; // Clear if unchecked
                    }
                } else if (questionNumber >= 36 && questionNumber <= 40) { // Table-based matching
                    answered = userAnswers[questionNumber] !== undefined;
                }
                
                // Update the visual progress item
                const progressItem = progressItems[questionNumber - 27]; // Adjust index for 27-40 range
                if (answered) {
                    progressItem.classList.add('completed');
                    answeredCount++;
                } else {
                    progressItem.classList.remove('completed');
                }
            }
            return answeredCount;
        }
        
        // Listen for changes on radio button inputs
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', updateProgress);
        });

        // Listen for input on fill-in-the-blank fields (not present in this specific set, but kept for robustness)
        document.querySelectorAll('input[type="text"]').forEach(input => {
            input.addEventListener('input', updateProgress);
        });
        
        // Reset button
        document.getElementById('reset-btn').addEventListener('click', () => {
            // Reset radio button answers
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });
            
            // Reset table answers
            document.querySelectorAll('.matching-table td').forEach(cell => {
                cell.classList.remove('selected');
            });
            
            // Reset fill-in-the-blank inputs (if any)
            document.querySelectorAll('input[type="text"]').forEach(input => {
                input.value = '';
            });

            // Clear all stored answers
            for (let key in userAnswers) {
                delete userAnswers[key];
            }

            // Reset highlights
            document.querySelectorAll('.highlight').forEach(highlight => {
                const parent = highlight.parentNode;
                while (highlight.firstChild) {
                    parent.insertBefore(highlight.firstChild, highlight);
                }
                parent.removeChild(highlight);
                parent.normalize();
            });
            
            updateProgress();
            document.getElementById('feedback-overlay').style.display = 'none';
        });
        
        // Submit and Feedback functionality
        const feedbackOverlay = document.getElementById('feedback-overlay');
        const closeFeedbackBtn = document.getElementById('close-feedback');

        document.getElementById('submit-btn').addEventListener('click', () => {
            console.log("Submit button clicked!"); // Debugging log 1
            pauseTimer.click();
            console.log("Timer paused."); // Debugging log 2
            
            // Define the correct answers and explanations for "Animals predicting earthquakes?"
            const answers = {
                27: 'NO', 28: 'YES', 29: 'NOT GIVEN', 30: 'NO',
                31: 'C', 32: 'B', 33: 'A', 34: 'D', 35: 'B',
                36: 'G', 37: 'A', 38: 'F', 39: 'D', 40: 'B'
            };
            
            const explanations = {
                27: "The passage states, 'What has been lacking is any real scientific data linking animal behaviour with earthquakes.'",
                28: "Coren 'noticed that on 27 February 2001, nearly 50 per cent were well above their usual baseline for activity and anxiety. The likelihood of such a difference was remote and Coren searched through the newspaper archives for a cause.' This search led him to the earthquake, prompting his investigation.",
                29: "The passage mentions the idea that some animals detect changes in electrical fields, but it does not specify if dogs are more sensitive to this than other animals.",
                30: "Coren's results are presented as 'an alluring hypothesis', not as clear proof. The passage also highlights Andy Michael's skepticism regarding the physical plausibility of dogs detecting sounds from that distance.",
                31: "Paragraph 4 details the Parkfield experiment, stating, 'to date the project has revealed nothing that would reliably indicate that an earthquake is imminent.' This means experts haven't found reliable predictors.",
                32: "When Coren re-analysed his data, he found that 'Dogs with floppy ears showed only half the change in activity and one-third the change in anxiety level of dogs with pricked ears.' This shows a correlation between ear shape and behavior.",
                33: "Andy Michael, a USGS seismologist, uses the example of Alfred Wegener to 'suggest there may be an aspect of Coren's theory which is correct' even if the proposed mechanism (seismic waves travelling that far) is wrong, drawing a parallel to Wegener's correct core ideas but incorrect mechanisms for continental drift.",
                34: "The penultimate paragraph discusses how 'China has already embraced the idea' of using animals (snakes) as earthquake predictors, illustrating how animal behavior is already exploited by some researchers/governments.",
                35: "In the final paragraph, the writer suggests setting up a call center: 'It could cost little more than the price of setting up a phone line. Put that way, what have we got to lose?' This implies that the potential benefits of collecting data on animal behavior outweigh the minimal cost, making it worth setting up.",
                36: "The passage states, 'The idea that animals can predict earthquakes has ancient origins. From 373 BC there are stories of rats, dogs and snakes deserting the Greek city of Helice before an earthquake hit.' This clearly predates modern civilization.",
                37: "The passage mentions, 'Another theory is that animals are responding to gas such as radon released from rocks before a quake, despite the fact that few experts accept such gas is produced.' This means experts think it is unlikely that gas is produced (and thus released) before quakes.",
                38: "Rupert Sheldrake 'suggests that 'people notice unusual animal behaviour before disasters. I think animals are picking up on something that we can't, perhaps by using a sixth sense.'' This is extra-sensory perception.",
                39: "Coren 'suspected the dogs in his study might also be hearing vibrations.' He suggests that 'the kind of high frequency sounds that many dogs can hear are emitted before an earthquake, perhaps from rocks scraping underground.' This links their ability to detecting movement/vibrations in the ground.",
                40: "Eric Wikramanayake, who was studying elephants during the tsunami, found 'precisely nothing. One herd was only 100 metres away from the beach when the tsunami arrived and they just took cover behind a large sand dune when the wave came in sight. The other herd was safely located about 5 kilometres inland and did not show any unusual movements.' This indicates their behavior showed little variation."
            };

            // Define passage references for each question (questions 27-40)
            const passageReferences = {
                27: "What has been lacking is any real scientific data linking animal behaviour with earthquakes.",
                28: "When he finally went through the figures in detail several years later however, he noticed that on 27 February 2001, nearly 50 per cent were well above their usual baseline for activity and anxiety. The likelihood of such a difference was remote and Coren searched through the newspaper archives for a cause. He found that on 28 February a quake of magnitude 6.8 shook the Pacific north- west, with an epicentre at Nisqually about 240 kilometres south of Vancouver.",
                29: "For example, one idea is that some animals detect changes in the Earth's electrical field.",
                30: "Taken together, Coren's results present an alluring hypothesis. He suggests that the kind of high frequency sounds that many dogs can hear are emitted before an earthquake, perhaps from rocks scraping underground. Admittedly this is only one study.",
                31: "Even the most comprehensive earthquake research project in the world, the Parkfield experiment in California, couldn't help. Since 1985, researchers from the US Geological Survey (USGS) have monitored a section of the San Andreas fault near the town of Parkfield. They have analysed every tremor, and measured tiny movements of the fault at 10- minute intervals, but to date the project has revealed nothing that would reliably indicate that an earthquake is imminent.",
                32: "He discovered that only one of the 14 hearing- impaired dogs in his study had shown any significant increase in anxiety on 27 February, and it was living with a hearing dog that had become anxious. Dogs with floppy ears showed only half the change in activity and one-third the change in anxiety level of dogs with pricked ears. Not only would an ear flap reduce the amount of sound reaching the inner ear; Coren also realised that it would weaken high frequency sounds more than low frequency ones. Further, dogs with smaller heads were significantly more likely to behave strangely than those with larger heads, which was interesting, given that smaller-headed dogs are more sensitive to higher frequencies.",
                33: "USGS seismologist Andy Michael points out that the epicentre was over 240 kilometres south of Vancouver. 'It is physically implausible for seismic waves in the kilohertz range to travel that far,' he says. Although unconvinced by Coren's ideas, Michael adds a cautionary tale. 'When Alfred Wegener presented his theory of continental drift, his core ideas about tectonics were right but nobody listened because the mechanisms were wrong.'",
                34: "So if animals are able to foretell earthquakes, does it matter how? In fact, while western society has been reluctant to use animals as earthquake predictors, China has already embraced the idea. Experts there use a video link to keep a 24-hour watch on snakes in farms nationwide. If they try to escape from their enclosure, observers raise a warning.",
                35: "Other governments may not be willing to go that far just yet, but Coren believes that a centre that people could call when they see unusual things would be useful. 'We would be able to collect much more data and give warnings when we get hundreds of calls from a single area,' he says. It could cost little more than the price of setting up a phone line. Put that way, what have we got to lose?",
                36: "The idea that animals can predict earthquakes has ancient origins. From 373 BC there are stories of rats, dogs and snakes deserting the Greek city of Helice before an earthquake hit.",
                37: "Another theory is that animals are responding to gas such as radon released from rocks before a quake, despite the fact that few experts accept such gas is produced.",
                38: "Rupert Sheldrake, a British researcher, suggests that ‘people notice unusual animal behaviour before disasters. I think animals are picking up on something that we can't, perhaps by using a sixth sense.’",
                39: "Coren, however, had read about rescue dogs hearing avalanche victims under the snow, and suspected the dogs in his study might also be hearing vibrations. So he returned to his data to search for supporting evidence. He discovered that only one of the 14 hearing- impaired dogs in his study had shown any significant increase in anxiety on 27 February, and it was living with a hearing dog that had become anxious. Dogs with floppy ears showed only half the change in activity and one-third the change in anxiety level of dogs with pricked ears. Not only would an ear flap reduce the amount of sound reaching the inner ear; Coren also realised that it would weaken high frequency sounds more than low frequency ones. Further, dogs with smaller heads were significantly more likely to behave strangely than those with larger heads, which was interesting, given that smaller-headed dogs are more sensitive to higher frequencies.",
                40: "Eric Wikramanayake, a conservation scientist who used radio collars and happened to be studying elephants in Sri Lanka when the tsunami struck, is entirely sceptical. What he found was precisely nothing. One herd was only 100 metres away from the beach when the tsunami arrived and they just took cover behind a large sand dune when the wave came in sight. The other herd was safely located about 5 kilometres inland and did not show any unusual movements."
            };
            
            console.log("Answers, explanations, and passage references defined."); // Debugging log 3

            let correctCount = 0;
            const feedbackBody = document.getElementById('feedback-body');
            feedbackBody.innerHTML = '';
            console.log("Feedback body cleared."); // Debugging log 4
            
            for (let i = 27; i <= 40; i++) { // Adjusted loop range for questions 27-40
                console.log(`Processing question ${i}`); // Debugging log 5
                let userAnswer, isCorrect, questionHTML, actualQuestionText;
                const feedbackItem = document.createElement('div');
                feedbackItem.className = 'feedback-item';
                
                if (i >= 27 && i <= 35) { // Multiple Choice & Yes/No/Not Given
                    const questionDiv = document.getElementById(`q${i}`);
                    if (!questionDiv) {
                        console.error(`Question div q${i} not found!`); // Critical debug
                        continue; // Skip to next iteration if element is missing
                    }
                    actualQuestionText = questionDiv.querySelector('.question-text').textContent;
                    userAnswer = userAnswers[i] || 'Not answered';
                    isCorrect = userAnswer === answers[i];
                    
                    let optionsHTML = '';
                    questionDiv.querySelectorAll('.options label').forEach(label => {
                        const value = label.querySelector('input').value;
                        const optionText = label.textContent.trim();
                        let optionClass = '';
                        if (value === userAnswer && !isCorrect) {
                            optionClass = 'incorrect';
                        } else if (value === answers[i]) {
                            optionClass = 'correct';
                        }
                        optionsHTML += `<span class="${optionClass}">${optionText}</span><br>`;
                    });
                    
                    questionHTML = `<div class="question-title-text">${actualQuestionText}</div><div class="options-feedback">${optionsHTML}</div>`;

                } else if (i >= 36 && i <= 40) { // Table-based matching
                    const questionRow = document.querySelector(`tr[data-question-id="${i}"]`);
                    if (!questionRow) {
                        console.error(`Question row for q${i} not found!`); // Critical debug
                        continue; // Skip to next iteration if element is missing
                    }
                    actualQuestionText = questionRow.querySelector('.question-cell').textContent.replace(/^\d+\.\s*/, '');
                    userAnswer = userAnswers[i] || 'Not answered';
                    isCorrect = userAnswer === answers[i];

                    questionHTML = `<div class="question-title-text">${actualQuestionText}</div>`;
                    questionHTML += `<div class="feedback-table-row">`;
                    questionHTML += `Your selection: <span class="${isCorrect ? 'correct' : 'incorrect'}"><strong>${userAnswer}</strong></span>`;
                    if (!isCorrect) {
                         questionHTML += ` Correct answer: <span class="correct"><strong>${answers[i]}</strong></span>`;
                    }
                    questionHTML += `</div>`;
                }
                
                if (isCorrect) correctCount++;
                
                // Ensure passageReferences[i] is accessed safely
                const currentPassageRef = passageReferences[i] || 'No relevant passage provided.';
                
                feedbackItem.innerHTML = `
                    <div class="feedback-question">
                        <span class="${isCorrect ? 'correct' : 'incorrect'}">Question ${i}:</span>
                        ${isCorrect ? `<i class="fas fa-check correct" style="margin-left: 5px;"></i>` : `<i class="fas fa-times incorrect" style="margin-left: 5px;"></i>`}
                    </div>
                    <p>${questionHTML}</p>
                    <div class="feedback-answer">
                        <strong>Your answer:</strong> ${userAnswer || 'Not answered'}<br>
                        ${!isCorrect ? `<strong>Correct answer:</strong> ${answers[i]}` : ''}
                    </div>
                    <div class="feedback-explanation">
                        <strong>Explanation:</strong> ${explanations[i]}
                    </div>
                    <div class="feedback-passage">
                        <strong>Relevant passage:</strong> "${currentPassageRef}"
                    </div>
                `;
                
                feedbackBody.appendChild(feedbackItem);
            }
            console.log("Finished processing all questions."); // Debugging log 6
            
            document.getElementById('score-display').textContent = `${correctCount}/14`; // Adjusted total questions for this test
            console.log("Score updated."); // Debugging log 7
            feedbackOverlay.style.display = 'flex';
            console.log("Feedback overlay displayed."); // Debugging log 8
        });

        closeFeedbackBtn.addEventListener('click', () => {
            feedbackOverlay.style.display = 'none';
        });

        feedbackOverlay.addEventListener('click', (e) => {
            if (e.target === feedbackOverlay) {
                feedbackOverlay.style.display = 'none';
            }
        });

        // Initialize timer display and progress
        updateTimer();
        updateProgress();
    </script>
</body>
</html>
